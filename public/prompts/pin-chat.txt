Pin Chat Component 
Create an interactive chat list component with pin/unpin functionality, featuring smooth animations when items move between "Pinned Chats" and "Other Chats" sections. Items should animate realistically as they reorder, and the pin icon should rotate 45° when pinned.
Dependencies Required
bashnpm install framer-motion lucide-react clsx tailwind-merge
Component Architecture
Main Component: PinChat.tsx

Type: Client-side React component ("use client")
Props: None (self-contained demo component)
State Management:

pinnedChatIds: string[] - Array of chat IDs that are pinned
isHydrated: boolean - Tracks client-side hydration status


Persistence: localStorage with key "pin-chat-pinned-ids"

Data Structures
typescriptinterface Chat {
  id: string;
  title: string;
  lastMessage: string;
  timestamp: string;
}

interface ListItem {
  id: string;
  type: "heading" | "chat";
  data?: Chat;      // Present when type is "chat"
  title?: string;   // Present when type is "heading"
  count?: number;   // Present when type is "heading"
}
Sample Data
Create 6 sample chats with:

Technology-related titles (Cloud Architecture, React, Database, API, DevOps, ML)
Relevant last messages
Varied timestamps (2 min ago, 5 min ago, 1 hour, 2 hours, 1 day, 2 days)
Default pinned chats: First 2 items (IDs "1" and "2")

Layout Structure
Container

Max width: max-w-lg
Centered: mx-auto
Border radius: rounded-xl
Full width: w-full

Content Area

Padding: p-4
Vertical spacing: space-y-3
Overflow: overflow-y-auto with no scrollbar
Background: Transparent (inherits from parent)

Loading State (Pre-Hydration)
Display while isHydrated is false:

Centered container with border
Header section with "Pin Chat" badge and "Interactive Demo" indicator
Pulsing "Loading..." text in center

Sub-Components
1. HeadingItem Component
Purpose: Section headers that show category and count
Props:

title: string - "Pinned Chats", "Other Chats", or "All Chats"
count: number - Number of items in section
icon: React.ReactNode - Pin icon for pinned, MessageSquare for others

Layout:

Flex row with gap-2
Padding: py-1
Z-index: relative z-10

Animations:

layoutId: "heading-${title}" for shared element transitions
Layout animation: Spring (stiffness: 400, damping: 30, mass: 0.8)
Initial: opacity 0, y: -10
Animate: opacity 1, y: 0
Exit: opacity 0, y: -10
Opacity transition: 0.2s duration

Text Styling:

Size: text-md
Color: neutral-800 (dark: neutral-100)

2. ChatItem Component
Purpose: Individual chat cards with pin toggle
Props:

chat: Chat - Chat data
isPinned: boolean - Whether chat is currently pinned
onTogglePin: (chatId: string) => void - Callback for pin toggle

Layout:

Flex row with justify-between
Border radius: rounded-lg
Padding: p-2
Border: border-neutral-300 (dark: border-neutral-600/50)
Background: Gradient from white → neutral-50 → neutral-100 (dark mode: neutral-950/30 → neutral-900/30 → neutral-800/30)
Cursor: pointer
Hover effect: Shadow elevation (shadow-md)

Structure:

Left section: Flex with gap-3

Icon container: 10×10, rounded-sm, MessageSquare icon (5×5)
Content: lastMessage (text-sm) and timestamp (text-xs)


Right section: Pin button (conditional, AnimatePresence)

Only visible when isPinned is true
Size: 8×8 circular button
Contains Pin icon (4×4)



Animations:

Card Layout Animation:

layoutId: Uses chat.id for tracking across moves
layout: "position" mode
Initial: opacity 0, scale 0.9
Animate: opacity 1, scale 1 (spring animation)
Exit: opacity 0, scale 0.9
Layout transition: Spring (stiffness: 350, damping: 30, mass: 1)


Pin Button Animation:

Wrapped in AnimatePresence with mode="wait"
Initial: opacity 0, scale 0, rotate 0
Animate: opacity 1, scale 1, rotate 45° (spring with delay 0.15s)
Exit: opacity 0, scale 0, rotate 0
Hover: scale 1.1
Tap: scale 0.95



Memoization:

Use React.memo with custom comparison
Only re-render if chat.id or isPinned changes

Core Logic
Unified List Creation (useMemo)
Build a single array combining headings and chats:

Separate chats: Filter into pinnedChats and unpinnedChats arrays
Build items array:

If pinnedChats exist:

Add "Pinned Chats" heading with count
Add all pinned chat items


Add second heading:

"Other Chats" if there are pinned chats
"All Chats" if no pinned chats
Include count of unpinned chats


Add all unpinned chat items


Return: Flat array with type discriminators

Pin Toggle Logic
handleTogglePin(chatId):
  If chatId in pinnedChatIds:
    Remove it (filter out)
  Else:
    Add it (spread and append)
LocalStorage Persistence
Load on Mount (useEffect):

Wait for hydration
Try to parse from localStorage key
Update state if found
Set isHydrated to true
Handle errors gracefully

Save on Change (useEffect):

Only run if isHydrated is true
Use 100ms debounce (setTimeout)
Stringify and save to localStorage
Handle errors gracefully
Clean up timeout on unmount

Animation Configuration
Framer Motion Settings
AnimatePresence (wrapping list):

initial={false} - Disable initial animations on mount
mode="popLayout" - Smooth transitions when items change

Layout Animations:

All items must have layout or layout="position" prop
Use layoutId for items that move between sections
Spring physics for natural movement

Timing Values

Opacity transitions: 0.2s - 0.25s
Scale animations: Spring (stiffness: 300-500, damping: 20-25)
Layout springs: Spring (stiffness: 350-400, damping: 30)
Pin icon delay: 0.15s before appearing
localStorage debounce: 100ms

Icons (from lucide-react)

Pin: Used for pinned section header and pin buttons
MessageSquare: Used for chat section header and chat icons

Styling Details
Colors

Borders: neutral-300/neutral-600
Text primary: neutral-600/neutral-300
Text secondary: neutral-500/neutral-400
Backgrounds: Gradients with neutral shades
Shadows: black/5 in light, white/5 in dark

Spacing

Card padding: p-2
Icon size: h-5 w-5 for headers, h-4 w-4 for pin
Gap between sections: space-y-3
Internal gaps: gap-2 to gap-3

Hover States

Cards: Increase shadow elevation
Pin button: Scale to 1.1
Tap: Scale to 0.95

Key Implementation Notes

Hydration handling: Must wait for client-side mount before accessing localStorage to prevent SSR mismatch
Layout IDs: Critical for Framer Motion to track elements across sections
AnimatePresence mode: Use "popLayout" for smooth reordering
Pin rotation: 45° rotation creates visual pin effect
Memoization: Prevent unnecessary re-renders with React.memo and useMemo
List flattening: Single array with type discriminators enables smooth animations
Spring physics: Natural movement requires proper stiffness/damping values
Debouncing: Prevent excessive localStorage writes during rapid toggling

Utility Function
Requires cn() utility function using clsx and tailwind-merge for conditional className merging.
Accessibility Considerations

Click handlers on entire card for easy interaction
Visual feedback on hover and active states
Semantic HTML structure
Stop propagation on pin button to prevent double-triggers