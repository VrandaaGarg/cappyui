{
  "name": "secure-vault",
  "type": "registry:ui",
  "title": "Secure Vault",
  "description": "An animated secure vault component with rotating vault door mechanism, concentric circles with radial gradients, and smooth opening animation. Features a custom SVG vault door that rotates 90 degrees, realistic metallic appearance with radial gradients, shine effect, and theme-aware colors.",
  "dependencies": [
    "framer-motion",
    "tailwind-merge",
    "clsx"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "components/ui/secure-vault.tsx",
      "content": "\"use client\";\n\nimport { memo, useCallback, useEffect, useRef, useState } from \"react\";\nimport { motion, useAnimationControls } from \"framer-motion\";\nimport { cn } from \"@/lib/utils\";\n\ninterface SecureVaultProps {\n  className?: string;\n}\n\ntype PathSegment = {\n  cmd: \"M\" | \"L\" | \"Q\" | \"Z\";\n  pts?: number[];\n};\n\nconst VIEWBOX_WIDTH = 850;\nconst VIEWBOX_HEIGHT = 450;\n\nconst serializePath = (segments: PathSegment[]) =>\n  segments\n    .map(({ cmd, pts }) =>\n      pts && pts.length ? `${cmd} ${pts.join(\" \")}` : cmd\n    )\n    .join(\" \");\n\nconst mirrorSegments = (segments: PathSegment[]): PathSegment[] =>\n  segments.map(({ cmd, pts }) => ({\n    cmd,\n    pts:\n      pts && pts.length\n        ? pts.map((value, index) =>\n            index % 2 === 1 ? VIEWBOX_HEIGHT - value : value\n          )\n        : undefined,\n  }));\n\n// Vault door SVG path - curved design with smooth bends on both ends\nconst VAULT_DOOR_PATH =\n  \"M 400 300 L 400 300 L 400 200 L 350 150 L 400 100 L 400 50 Q 350 0 300 50 L 300 50 L 300 50 L 300 250 L 350 300 L 300 350 L 300 400 Q 350 450 400 400 L 400 400 L 400 400 L 400 300 \";\n\nconst DOOR_PATH_SEGMENTS: PathSegment[] = [\n  { cmd: \"M\", pts: [-100, 420] },\n  { cmd: \"L\", pts: [220, 420] },\n  { cmd: \"Q\", pts: [236, 420, 252, 404] },\n  { cmd: \"L\", pts: [280, 368] },\n  { cmd: \"Q\", pts: [296, 352, 314, 352] },\n  { cmd: \"L\", pts: [436, 352] },\n  { cmd: \"Q\", pts: [454, 352, 470, 368] },\n  { cmd: \"L\", pts: [498, 404] },\n  { cmd: \"Q\", pts: [514, 420, 526, 420] },\n  { cmd: \"L\", pts: [VIEWBOX_WIDTH, 420] },\n];\n\nconst TOP_DOOR_PATH = serializePath(DOOR_PATH_SEGMENTS);\nconst BOTTOM_DOOR_PATH = serializePath(mirrorSegments(DOOR_PATH_SEGMENTS));\n\nconst TOP_DOOR_FILL_PATH = serializePath([\n  ...DOOR_PATH_SEGMENTS,\n  { cmd: \"L\", pts: [VIEWBOX_WIDTH, 0] },\n  { cmd: \"L\", pts: [-100, 0] },\n  { cmd: \"Z\" },\n]);\n\nconst BOTTOM_DOOR_FILL_PATH = serializePath([\n  ...mirrorSegments(DOOR_PATH_SEGMENTS),\n  { cmd: \"L\", pts: [VIEWBOX_WIDTH, VIEWBOX_HEIGHT] },\n  { cmd: \"L\", pts: [-100, VIEWBOX_HEIGHT] },\n  { cmd: \"Z\" },\n]);\n\nconst CIRCUIT_STEP_COUNT = 8;\n\nconst shineVariants = {\n  initial: { x: \"-200%\", opacity: 0 },\n  active: {\n    x: \"200%\",\n    opacity: [0, 0.8, 0],\n    transition: {\n      duration: 1.2,\n      ease: \"easeInOut\" as const,\n    },\n  },\n};\n\nexport const SecureVault = memo(({ className }: SecureVaultProps) => {\n  const [circuitStep, setCircuitStep] = useState(0);\n  const [vaultOpen, setVaultOpen] = useState(false);\n  const [isDark, setIsDark] = useState(true);\n\n  const circuitsComplete = circuitStep >= CIRCUIT_STEP_COUNT;\n  const shineControls = useAnimationControls();\n\n  // Detect theme changes\n  useEffect(() => {\n    const checkTheme = () => {\n      setIsDark(document.documentElement.classList.contains(\"dark\"));\n    };\n\n    checkTheme();\n\n    const observer = new MutationObserver(checkTheme);\n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: [\"class\"],\n    });\n\n    return () => observer.disconnect();\n  }, []);\n\n  const cancelRef = useRef(false);\n  const timeoutsRef = useRef<number[]>([]);\n  const isMountedRef = useRef(true);\n\n  const clearAllTimeouts = useCallback(() => {\n    timeoutsRef.current.forEach((timeoutId) => {\n      clearTimeout(timeoutId);\n    });\n    timeoutsRef.current = [];\n  }, []);\n\n  const sleep = useCallback((ms: number) => {\n    return new Promise<void>((resolve) => {\n      const timeoutId = window.setTimeout(() => {\n        timeoutsRef.current = timeoutsRef.current.filter(\n          (id) => id !== timeoutId\n        );\n        resolve();\n      }, ms);\n      timeoutsRef.current.push(timeoutId);\n    });\n  }, []);\n\n  const runSequence = useCallback(async () => {\n    try {\n      // Reset to idle\n      if (!isMountedRef.current || cancelRef.current) return;\n      setCircuitStep(0);\n      setVaultOpen(false);\n      shineControls.set(shineVariants.initial);\n\n      if (!isMountedRef.current || cancelRef.current) return;\n      await sleep(500);\n\n      // Phase 1: Animate circuits (icon fading in)\n      for (let i = 0; i < CIRCUIT_STEP_COUNT; i++) {\n        if (!isMountedRef.current || cancelRef.current) return;\n        setCircuitStep(i + 1);\n        await sleep(120);\n      }\n\n      if (!isMountedRef.current || cancelRef.current) return;\n      await sleep(300);\n\n      // Phase 2: Rotate vault door and open\n      if (!isMountedRef.current || cancelRef.current) return;\n      setVaultOpen(true);\n\n      // Trigger shine effect when vault opens\n      if (!isMountedRef.current || cancelRef.current) return;\n      shineControls.start(\"active\");\n\n      await sleep(800);\n\n      if (!isMountedRef.current || cancelRef.current) return;\n\n      // Phase 3: Hold open state\n      await sleep(1500);\n\n      if (!isMountedRef.current || cancelRef.current) return;\n    } catch (error) {\n      // Silently catch errors from cancelled animations\n      if (!isMountedRef.current || cancelRef.current) return;\n      throw error;\n    }\n  }, [shineControls, sleep]);\n\n  useEffect(() => {\n    isMountedRef.current = true;\n    cancelRef.current = false;\n\n    const loop = async () => {\n      while (isMountedRef.current && !cancelRef.current) {\n        try {\n          await runSequence();\n        } catch (error) {\n          // Break loop on error\n          if (!isMountedRef.current || cancelRef.current) break;\n          console.error(\"Animation sequence error:\", error);\n          break;\n        }\n      }\n    };\n\n    loop();\n\n    return () => {\n      isMountedRef.current = false;\n      cancelRef.current = true;\n      clearAllTimeouts();\n      // Stop any ongoing animations\n      shineControls.stop();\n    };\n  }, [clearAllTimeouts, runSequence, shineControls]);\n\n  return (\n    <div\n      className={cn(\n        \"relative flex items-center justify-center mx-auto h-[300px] w-full max-w-xs overflow-hidden\",\n        className\n      )}\n    >\n      {/* Main vault container */}\n      <div className=\"relative w-full h-full\">\n        <div className=\"absolute left-4 right-4 top-2 bottom-2 md:left-8 md:right-8 md:top-6 md:bottom-6 border border-neutral-300/40 dark:border-neutral-800/20 outline outline-neutral-200 dark:outline-neutral-900 rounded-[32px] overflow-hidden\">\n          <div className=\"absolute inset-0 bg-white dark:bg-neutral-950\" />\n\n          <div className=\"relative w-full h-full flex items-center justify-center\">\n            {/* Top vault opening line */}\n            <motion.svg\n              className=\"absolute top-0 left-0 w-full h-[60%] pointer-events-none z-10\"\n              viewBox=\"0 0 750 450\"\n              initial={{ y: -15 }}\n              animate={{ y: vaultOpen ? -60 : -15 }}\n              transition={{ duration: 0.6, ease: \"easeInOut\" }}\n            >\n              <defs>\n                {/* Dark theme gradient */}\n                <linearGradient\n                  id=\"topDoorGradientDark\"\n                  x1=\"0%\"\n                  y1=\"0%\"\n                  x2=\"0%\"\n                  y2=\"100%\"\n                >\n                  <stop offset=\"0%\" stopColor=\"#171717\" />\n                  <stop offset=\"20%\" stopColor=\"#262626\" />\n                  <stop offset=\"100%\" stopColor=\"#171717\" />\n                </linearGradient>\n                {/* Light theme gradient */}\n                <linearGradient\n                  id=\"topDoorGradientLight\"\n                  x1=\"0%\"\n                  y1=\"0%\"\n                  x2=\"0%\"\n                  y2=\"100%\"\n                >\n                  <stop offset=\"0%\" stopColor=\"#e5e5e5\" />\n                  <stop offset=\"20%\" stopColor=\"#f5f5f5\" />\n                  <stop offset=\"100%\" stopColor=\"#e5e5e5\" />\n                </linearGradient>\n              </defs>\n              <motion.path\n                d={TOP_DOOR_FILL_PATH}\n                fill={\n                  isDark\n                    ? \"url(#topDoorGradientDark)\"\n                    : \"url(#topDoorGradientLight)\"\n                }\n                initial={{ opacity: 1 }}\n                animate={{ opacity: vaultOpen ? 0.85 : 1 }}\n                transition={{ duration: 0.6, ease: \"easeInOut\" }}\n              />\n              <motion.path\n                d={TOP_DOOR_PATH}\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth={1.5}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                className=\"text-neutral-300 dark:text-neutral-700\"\n                initial={{ opacity: 0.85 }}\n                animate={{ opacity: vaultOpen ? 1 : 0.85 }}\n                transition={{ duration: 0.6, ease: \"easeInOut\" }}\n              />\n            </motion.svg>\n\n            {/* Bottom vault opening line (inverted) */}\n            <motion.svg\n              className=\"absolute bottom-0 left-0 w-full h-[60%] pointer-events-none z-10\"\n              viewBox=\"0 0 750 450\"\n              initial={{ y: 15 }}\n              animate={{ y: vaultOpen ? 60 : 15 }}\n              transition={{ duration: 0.6, ease: \"easeInOut\" }}\n            >\n              <defs>\n                {/* Dark theme gradient */}\n                <linearGradient\n                  id=\"bottomDoorGradientDark\"\n                  x1=\"0%\"\n                  y1=\"0%\"\n                  x2=\"0%\"\n                  y2=\"100%\"\n                >\n                  <stop offset=\"0%\" stopColor=\"#171717\" />\n                  <stop offset=\"80%\" stopColor=\"#262626\" />\n                  <stop offset=\"100%\" stopColor=\"#171717\" />\n                </linearGradient>\n                {/* Light theme gradient */}\n                <linearGradient\n                  id=\"bottomDoorGradientLight\"\n                  x1=\"0%\"\n                  y1=\"0%\"\n                  x2=\"0%\"\n                  y2=\"100%\"\n                >\n                  <stop offset=\"0%\" stopColor=\"#e5e5e5\" />\n                  <stop offset=\"80%\" stopColor=\"#f5f5f5\" />\n                  <stop offset=\"100%\" stopColor=\"#e5e5e5\" />\n                </linearGradient>\n              </defs>\n              <motion.path\n                d={BOTTOM_DOOR_FILL_PATH}\n                fill={\n                  isDark\n                    ? \"url(#bottomDoorGradientDark)\"\n                    : \"url(#bottomDoorGradientLight)\"\n                }\n                initial={{ opacity: 1 }}\n                animate={{ opacity: vaultOpen ? 0.85 : 1 }}\n                transition={{ duration: 0.6, ease: \"easeInOut\" }}\n              />\n              <motion.path\n                d={BOTTOM_DOOR_PATH}\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth={1.5}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                className=\"text-neutral-400 dark:text-neutral-700\"\n                initial={{ opacity: 0.85 }}\n                animate={{ opacity: vaultOpen ? 1 : 0.85 }}\n                transition={{ duration: 0.6, ease: \"easeInOut\" }}\n              />\n            </motion.svg>\n\n            {/* Center security icon container */}\n            <motion.div\n              className=\"relative z-10 w-24 h-24 flex rounded-full outline-2 outline-neutral-300 dark:outline-neutral-800 items-center justify-center\"\n              initial={false}\n              animate={{\n                borderColor: vaultOpen\n                  ? isDark\n                    ? \"#FFFFFF\"\n                    : \"#696969\"\n                  : isDark\n                  ? \"#0a0a0a\"\n                  : \"#d4d4d4\",\n                boxShadow: vaultOpen\n                  ? isDark\n                    ? \"0 0 30px rgba(255, 255, 255, 0.3), 0 0 60px rgba(255, 255, 255, 0.2), inset 0 0 20px rgba(255, 255, 255, 0.15)\"\n                    : \"0 0 30px rgba(0, 0, 0, 0.2), 0 0 60px rgba(0, 0, 0, 0.15), inset 0 0 20px rgba(0, 0, 0, 0.1)\"\n                  : \"0 0 0px rgba(0, 0, 0, 0)\",\n                borderWidth: \"4px\",\n              }}\n              transition={{ duration: 0.6, ease: \"easeInOut\" }}\n            >\n              <motion.div\n                className=\"absolute inset-0 rounded-full bg-white dark:bg-neutral-950\"\n                initial={false}\n                animate={{\n                  borderColor: vaultOpen\n                    ? isDark\n                      ? \"#FFFFFF\"\n                      : \"#000000\"\n                    : isDark\n                    ? \"#404040\"\n                    : \"#a3a3a3\",\n                  borderWidth: \"1px\",\n                }}\n                transition={{ duration: 0.6, ease: \"easeInOut\" }}\n                style={{ borderStyle: \"solid\" }}\n              />\n\n              {/* Shine effect overlay */}\n              <div className=\"absolute inset-0 z-20 overflow-hidden rounded-full\">\n                <motion.div\n                  className={`absolute inset-y-0 -left-8 w-12 ${\n                    isDark\n                      ? \"bg-gradient-to-r from-transparent via-white to-transparent\"\n                      : \"bg-gradient-to-r from-transparent via-neutral-200 to-transparent\"\n                  }`}\n                  style={{ transform: \"skewX(-20deg)\" }}\n                  animate={shineControls}\n                  variants={shineVariants}\n                />\n              </div>\n              <div\n                className=\"relative rounded-full flex items-center justify-center h-[74px] w-[74px]\"\n                style={{\n                  background: isDark\n                    ? \"radial-gradient(circle at 30% 30%, #525252 0%, #404040 30%, #262626 60%, #171717 100%)\"\n                    : \"radial-gradient(circle at 30% 30%, #d4d4d4 0%, #a3a3a3 30%, #737373 60%, #525252 100%)\",\n                }}\n              >\n                {/* Concentric circles background */}\n                <div className=\"absolute inset-0 rounded-full overflow-hidden\">\n                  {[...Array(12)].map((_, i) => {\n                    const isEven = i % 2 === 0;\n                    return (\n                      <div\n                        key={i}\n                        className={`absolute rounded-full ${\n                          isEven\n                            ? \"border border-neutral-400/30 dark:border-neutral-900/20\"\n                            : \"border border-neutral-500/20 dark:border-neutral-800/20\"\n                        }`}\n                        style={{\n                          top: `${i * 8.33}%`,\n                          left: `${i * 8.33}%`,\n                          right: `${i * 8.33}%`,\n                          bottom: `${i * 8.33}%`,\n                          background: isEven\n                            ? isDark\n                              ? \"radial-gradient(circle at 35% 35%, rgba(64, 64, 64, 0.3) 0%, rgba(38, 38, 38, 0.15) 50%, rgba(23, 23, 23, 0.2) 100%)\"\n                              : \"radial-gradient(circle at 35% 35%, rgba(212, 212, 212, 0.3) 0%, rgba(163, 163, 163, 0.15) 50%, rgba(115, 115, 115, 0.2) 100%)\"\n                            : isDark\n                            ? \"radial-gradient(circle at 65% 65%, rgba(38, 38, 38, 0.25) 0%, rgba(64, 64, 64, 0.1) 50%, rgba(82, 82, 82, 0.15) 100%)\"\n                            : \"radial-gradient(circle at 65% 65%, rgba(115, 115, 115, 0.25) 0%, rgba(163, 163, 163, 0.1) 50%, rgba(212, 212, 212, 0.15) 100%)\",\n                        }}\n                      />\n                    );\n                  })}\n                </div>\n\n                {/* SVG Icon */}\n                <motion.svg\n                  viewBox=\"250 -25 200 500\"\n                  className=\"relative z-10 w-10 h-10\"\n                  initial={false}\n                  animate={{\n                    rotate: vaultOpen ? 90 : 0,\n                  }}\n                  transition={{ duration: 0.8, ease: \"easeInOut\" }}\n                >\n                  <motion.path\n                    d={VAULT_DOOR_PATH}\n                    className={`${isDark ? \"text-white\" : \"text-black\"}`}\n                    fill=\"currentColor\"\n                    stroke=\"currentColor\"\n                    strokeWidth={3}\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    initial={false}\n                    animate={{\n                      opacity:\n                        circuitStep === 0\n                          ? 0.3\n                          : circuitsComplete\n                          ? 1\n                          : 0.5 + (circuitStep / CIRCUIT_STEP_COUNT) * 0.5,\n                    }}\n                    transition={{ duration: 0.3, ease: \"easeOut\" }}\n                  />\n                </motion.svg>\n              </div>\n            </motion.div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n});\n\nSecureVault.displayName = \"SecureVault\";\n\nexport default SecureVault;\n",
      "type": "registry:ui",
      "target": "components/ui/secure-vault.tsx"
    }
  ]
}