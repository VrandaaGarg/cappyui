{
  "name": "book-appointment",
  "type": "registry:ui",
  "title": "Book Appointment",
  "description": "A compact, interactive appointment booking component with calendar and 3D time slot selection. Features month navigation with fade animations, automatic blocking of past and booked dates (strikethrough, non-selectable), memoized month rendering, infinite scrolling time slots from 9 AM to 5 PM with 15-minute intervals, requestAnimationFrame-driven perspective effects for a circular strip appearance, and real-time selection display. Fully responsive with mobile-optimized sizing.",
  "dependencies": ["framer-motion", "tailwind-merge", "clsx", "lucide-react"],
  "registryDependencies": [],
  "files": [
    {
      "path": "components/ui/book-appointment.tsx",
      "content": "\"use client\";\n\nimport React, { useState, useRef, useEffect, useMemo } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface BookAppointmentProps {\n  className?: string;\n  bookedDates?: Date[];\n}\n\nconst DAYS = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\nconst MONTHS = [\n  \"January\",\n  \"February\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\",\n];\n\nconst generateTimeSlots = () => {\n  const slots = [];\n  for (let hour = 9; hour <= 17; hour++) {\n    for (let minute = 0; minute < 60; minute += 15) {\n      if (hour === 17 && minute > 0) break;\n      const period = hour >= 12 ? \"PM\" : \"AM\";\n      const displayHour = hour > 12 ? hour - 12 : hour === 0 ? 12 : hour;\n      const timeString = `${displayHour}:${minute.toString().padStart(2, \"0\")} ${period}`;\n      slots.push(timeString);\n    }\n  }\n  return slots;\n};\n\nconst TIME_SLOTS = generateTimeSlots();\n\nexport const BookAppointment = ({\n  className,\n  bookedDates = [],\n}: BookAppointmentProps) => {\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [selectedDate, setSelectedDate] = useState(new Date());\n  const [selectedTime, setSelectedTime] = useState(TIME_SLOTS[0]);\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n  const isScrollingRef = useRef(false);\n  const animationFrameRef = useRef<number | null>(null);\n  const timeoutRef = useRef<number | null>(null);\n\n  const todayStart = useMemo(() => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    return today;\n  }, []);\n\n  const year = currentDate.getFullYear();\n  const month = currentDate.getMonth();\n\n  const firstDayOfMonth = new Date(year, month, 1).getDay();\n  const daysInMonth = new Date(year, month + 1, 0).getDate();\n\n  const isDateBooked = (date: Date) => {\n    return bookedDates.some(\n      (bookedDate) =>\n        bookedDate.getDate() === date.getDate() &&\n        bookedDate.getMonth() === date.getMonth() &&\n        bookedDate.getFullYear() === date.getFullYear()\n    );\n  };\n\n  const isDateSelected = (date: Date) => {\n    return (\n      date.getDate() === selectedDate.getDate() &&\n      date.getMonth() === selectedDate.getMonth() &&\n      date.getFullYear() === selectedDate.getFullYear()\n    );\n  };\n\n  const isToday = (date: Date) => {\n    const checkDate = new Date(date);\n    checkDate.setHours(0, 0, 0, 0);\n    return checkDate.getTime() === todayStart.getTime();\n  };\n\n  const isPastDate = (date: Date) => {\n    const checkDate = new Date(date);\n    checkDate.setHours(0, 0, 0, 0);\n    return checkDate.getTime() < todayStart.getTime();\n  };\n\n  const goToPreviousMonth = () => {\n    setCurrentDate(new Date(year, month - 1, 1));\n  };\n\n  const goToNextMonth = () => {\n    setCurrentDate(new Date(year, month + 1, 1));\n  };\n\n  const handleDateClick = (date: Date) => {\n    setSelectedDate(date);\n  };\n\n  const formatDate = (date: Date) => {\n    return date.toLocaleDateString(\"en-US\", {\n      weekday: \"long\",\n      year: \"numeric\",\n      month: \"long\",\n      day: \"numeric\",\n    });\n  };\n\n  useEffect(() => {\n    const scrollContainer = scrollContainerRef.current;\n    if (!scrollContainer) return;\n\n    const updatePerspective = () => {\n      const buttons = scrollContainer.querySelectorAll(\"button\");\n      const containerRect = scrollContainer.getBoundingClientRect();\n      const containerCenter = containerRect.top + containerRect.height / 2;\n\n      buttons.forEach((button) => {\n        const buttonRect = button.getBoundingClientRect();\n        const buttonCenter = buttonRect.top + buttonRect.height / 2;\n        const distanceFromCenter = buttonCenter - containerCenter;\n        const maxDistance = containerRect.height / 2;\n        const normalizedDistance = Math.abs(distanceFromCenter) / maxDistance;\n\n        if (normalizedDistance > 0.5) {\n          const intensity = (normalizedDistance - 0.5) * 2;\n          const rotateX = distanceFromCenter > 0 ? intensity * 45 : -intensity * 45;\n          const scale = 1 - intensity * 0.3;\n          const opacity = 1 - intensity * 0.5;\n\n          (button as HTMLElement).style.transform = `perspective(500px) rotateX(${rotateX}deg) scale(${scale})`;\n          (button as HTMLElement).style.opacity = opacity.toString();\n        } else {\n          (button as HTMLElement).style.transform = \"perspective(500px) rotateX(0deg) scale(1)\";\n          (button as HTMLElement).style.opacity = \"1\";\n        }\n      });\n    };\n\n    const schedulePerspectiveUpdate = () => {\n      if (animationFrameRef.current !== null) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n      animationFrameRef.current = requestAnimationFrame(() => {\n        updatePerspective();\n        animationFrameRef.current = null;\n      });\n    };\n\n    const resetScrollingFlag = () => {\n      if (timeoutRef.current !== null) {\n        window.clearTimeout(timeoutRef.current);\n      }\n      timeoutRef.current = window.setTimeout(() => {\n        isScrollingRef.current = false;\n        timeoutRef.current = null;\n      }, 50);\n    };\n\n    const handleScroll = () => {\n      if (isScrollingRef.current) return;\n\n      schedulePerspectiveUpdate();\n\n      const { scrollTop, scrollHeight, clientHeight } = scrollContainer;\n      const scrollThreshold = 100;\n\n      if (scrollTop < scrollThreshold) {\n        isScrollingRef.current = true;\n        scrollContainer.scrollTop = scrollHeight - clientHeight - scrollThreshold;\n        resetScrollingFlag();\n      } else if (scrollTop > scrollHeight - clientHeight - scrollThreshold) {\n        isScrollingRef.current = true;\n        scrollContainer.scrollTop = scrollThreshold;\n        resetScrollingFlag();\n      }\n    };\n\n    scrollContainer.addEventListener(\"scroll\", handleScroll);\n    scrollContainer.scrollTop = (scrollContainer.scrollHeight - scrollContainer.clientHeight) / 2;\n    updatePerspective();\n\n    return () => {\n      scrollContainer.removeEventListener(\"scroll\", handleScroll);\n      if (animationFrameRef.current !== null) {\n        cancelAnimationFrame(animationFrameRef.current);\n        animationFrameRef.current = null;\n      }\n      if (timeoutRef.current !== null) {\n        window.clearTimeout(timeoutRef.current);\n        timeoutRef.current = null;\n      }\n    };\n  }, []);\n\n  const calendarDays = useMemo(() => {\n    const days: { day: number; isCurrentMonth: boolean; date: Date }[] = [];\n\n    const prevMonthDays = new Date(year, month, 0).getDate();\n    const prevMonthStart = prevMonthDays - firstDayOfMonth + 1;\n\n    for (let i = 0; i < firstDayOfMonth; i++) {\n      const day = prevMonthStart + i;\n      days.push({\n        day,\n        isCurrentMonth: false,\n        date: new Date(year, month - 1, day),\n      });\n    }\n\n    for (let day = 1; day <= daysInMonth; day++) {\n      days.push({\n        day,\n        isCurrentMonth: true,\n        date: new Date(year, month, day),\n      });\n    }\n\n    while (days.length < 42) {\n      const day = days.length - (firstDayOfMonth + daysInMonth) + 1;\n      days.push({\n        day,\n        isCurrentMonth: false,\n        date: new Date(year, month + 1, day),\n      });\n    }\n\n    return days;\n  }, [daysInMonth, firstDayOfMonth, month, year]);\n\n  return (\n    <div\n      className={cn(\n        \"w-full max-w-lg mx-auto bg-white dark:bg-neutral-950 rounded-2xl border border-neutral-400/50 dark:border-neutral-800 overflow-hidden\",\n        className\n      )}\n    >\n      <div className=\"border-b border-neutral-400/50 text-center dark:border-neutral-800 p-2\">\n        <span className=\"text-sm font-semibold text-center text-neutral-950 dark:text-neutral-100\">\n          Book an appointment\n        </span>\n      </div>\n\n      <div className=\"grid grid-cols-8 border-b border-neutral-400/50 dark:border-neutral-800\">\n        <div className=\"col-span-5 p-3 border-r border-neutral-400/50 dark:border-neutral-800\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <button\n              onClick={goToPreviousMonth}\n              className=\"p-1 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded transition-colors\"\n            >\n              <ChevronLeft className=\"w-4 h-4\" />\n            </button>\n            <span className=\"text-xs md:text-sm font-semibold\">\n              {MONTHS[month]} {year}\n            </span>\n            <button\n              onClick={goToNextMonth}\n              className=\"p-1 hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded transition-colors\"\n            >\n              <ChevronRight className=\"w-4 h-4\" />\n            </button>\n          </div>\n\n          <div className=\"grid grid-cols-7 gap-1\">\n            {DAYS.map((day) => (\n              <div\n                key={day}\n                className=\"text-center text-[10px] md:text-xs font-medium text-neutral-600 dark:text-neutral-400 py-1\"\n              >\n                {day}\n              </div>\n            ))}\n\n            {calendarDays.map(({ day, isCurrentMonth, date }, index) => {\n              const booked = isDateBooked(date);\n              const past = isPastDate(date);\n              const selected = isDateSelected(date);\n              const today = isToday(date);\n              const isDisabled = booked || past || !isCurrentMonth;\n\n              return (\n                <motion.button\n                  key={`${date.getFullYear()}-${date.getMonth()}-${day}`}\n                  onClick={() => !isDisabled && handleDateClick(date)}\n                  disabled={isDisabled}\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  transition={{ duration: 0.3, delay: index * 0.01 }}\n                  className={cn(\n                    \"aspect-square md:w-8 md:h-8 w-6 h-6 rounded flex items-center justify-center text-[9px] md:text-xs font-medium transition-all relative\",\n                    !isCurrentMonth && \"text-neutral-300 dark:text-neutral-700 cursor-not-allowed\",\n                    booked\n                      ? \"text-neutral-400 dark:text-neutral-600 cursor-not-allowed\"\n                      : past\n                      ? \"text-neutral-300 dark:text-neutral-700 cursor-not-allowed\"\n                      : selected\n                      ? \"bg-neutral-950 dark:bg-neutral-100 text-white dark:text-neutral-950\"\n                      : today\n                      ? \"bg-neutral-200 dark:bg-neutral-800\"\n                      : isCurrentMonth\n                        ? \"hover:bg-neutral-100 dark:hover:bg-neutral-800\"\n                        : \"text-neutral-300 dark:text-neutral-700 cursor-not-allowed\"\n                  )}\n                  whileHover={!isDisabled && isCurrentMonth ? { scale: 1.05 } : {}}\n                  whileTap={!isDisabled && isCurrentMonth ? { scale: 0.95 } : {}}\n                >\n                  <span className={cn((booked || past) && \"line-through\")}>{day}</span>\n                </motion.button>\n              );\n            })}\n          </div>\n        </div>\n\n        <div className=\"col-span-3 p-2 relative flex pb-7 flex-col items-center gap-2\">\n          <div\n            className=\"relative w-full max-h-48 md:max-h-58 overflow-hidden\"\n            style={{ perspective: \"500px\" }}\n          >\n            <div className=\"absolute top-0 left-0 right-0 h-12 bg-gradient-to-b from-white dark:from-neutral-950 to-transparent z-10 pointer-events-none\" />\n            <div className=\"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-white dark:from-neutral-950 to-transparent z-10 pointer-events-none\" />\n\n            <div\n              ref={scrollContainerRef}\n              className=\"h-full overflow-y-auto scrollbar-hide px-1\"\n              style={{\n                scrollbarWidth: \"none\",\n                msOverflowStyle: \"none\",\n                transformStyle: \"preserve-3d\",\n              }}\n            >\n              <div\n                className=\"flex flex-col gap-1.5 py-4\"\n                style={{ transformStyle: \"preserve-3d\" }}\n              >\n                {[...Array(3)].map((_, copyIndex) => (\n                  <React.Fragment key={`copy-${copyIndex}`}>\n                    {TIME_SLOTS.map((time, index) => (\n                      <motion.button\n                        key={`${time}-${copyIndex}-${index}`}\n                        onClick={() => setSelectedTime(time)}\n                        className={cn(\n                          \"px-2 py-1.5 rounded-lg border border-neutral-300 dark:border-neutral-800/50 text-xs font-medium whitespace-nowrap\",\n                          selectedTime === time\n                            ? \"bg-neutral-950 dark:bg-neutral-100 text-white dark:text-neutral-950\"\n                            : \"bg-white dark:bg-neutral-900 \"\n                        )}\n                        style={{\n                          transition: \"transform 0.1s ease-out, opacity 0.1s ease-out, background-color 0.2s\",\n                          transformStyle: \"preserve-3d\",\n                        }}\n                        whileTap={{ scale: 0.95 }}\n                      >\n                        <span className=\"text-[10px] md:text-xs\">{time}</span>\n                      </motion.button>\n                    ))}\n                  </React.Fragment>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          <motion.button\n            className=\"w-full px-3 absolute bottom-2 left-1/2 -translate-x-1/2 max-w-20 md:max-w-40 py-1.5 md:py-2 bg-neutral-950 dark:bg-neutral-100 text-white dark:text-neutral-950 rounded-lg font-semibold text-xs\"\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n          >\n            BOOK\n          </motion.button>\n        </div>\n      </div>\n\n      <div className=\"p-2 text-center\">\n        <span className=\"text-xs text-neutral-700 dark:text-neutral-300 text-center\">\n          Appointment to be booked is{\" \"}\n          <span className=\"font-semibold\">{formatDate(selectedDate)}</span> at{\" \"}\n          <span className=\"font-semibold\">{selectedTime}</span>\n        </span>\n      </div>\n    </div>\n  );\n};\n\nexport default BookAppointment;",
      "type": "registry:ui",
      "target": "components/ui/book-appointment.tsx"
    }
  ]
}
